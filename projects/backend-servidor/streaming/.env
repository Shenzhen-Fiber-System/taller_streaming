# Streaming (apps/backend/streaming) — example env
# Copy this file to .env (same folder) for local development.
# NOTE: .env is ignored by git in this repo.

# ---- Server ----
# Optional: override Spring Boot server port (matches application.yml default)
# SERVER_PORT=8087

# ---- Database (MySQL / R2DBC) ----
# Used by application.yml: spring.r2dbc.url/username/password
SPRING_R2DBC_URL=r2dbc:mysql://localhost:3306/streamingdb
DB_USERNAME=root
DB_PASSWORD=root

# ---- Janus ----
# IMPORTANT: this must match the Janus HTTP transport port.
# In your VPS Janus responds on 7088 (not 8088).
JANUS_URL=http://localhost:7088
JANUS_API_TIMEOUT=30
JANUS_ROOM_ID=1234
JANUS_ROOM_SECRET=adminpwd

# Admin key for VideoRoom plugin admin operations (rtp_forward, etc.)
# Must match the admin_key in janus.plugin.videoroom.jcfg
# Leave empty if your Janus doesn't require admin_key
JANUS_ADMIN_KEY=supersecret

# Optional: log each HTTP request (useful for debugging offers)
# HTTP_LOGGING_ENABLED=true

# ---- WebRTC ICE (STUN/TURN) ----
# If WEBRTC_ENABLED is false, /api/v1/webrtc/* returns 503.
WEBRTC_ENABLED=true

# Comma-separated list (RTCConfiguration compatible)
WEBRTC_STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# TURN is optional. If you set all 3 values below (server+username+credential),
# the API will return turnAvailable=true and include TURN in iceServers.
# IMPORTANT: replace placeholders before using.
WEBRTC_TURN_SERVER=turn:taller.ourshop.work:3478?transport=udp,turn:taller.ourshop.work:3478?transport=tcp
WEBRTC_TURN_USERNAME=ourshop
WEBRTC_TURN_CREDENTIAL=taller@333*2026

# ---- WebRTC → HLS (FFmpeg) ----
# FFmpeg must be installed and available on PATH.
# Output directory where index.m3u8 + segments will be written.
WEBRTC_HLS_OUTPUT_DIR=/var/lib/ourshop/webrtc-hls

# Public base URL used to build absolute HLS URLs returned by the API.
# Example for VPS:
# WEBRTC_HLS_PUBLIC_BASE_URL=https://taller.ourshop.work
WEBRTC_HLS_PUBLIC_BASE_URL=https://taller.ourshop.work

# Host/IP where Janus should forward RTP (UDP) to reach this backend.
# NOTE: this is NOT the Janus HTTP port. Keep it host-only.
WEBRTC_RTP_FORWARD_HOST=127.0.0.1
