# Streaming (apps/backend/streaming) — example env
# Copy this file to .env (same folder) for local development.
# NOTE: .env is ignored by git in this repo.

# ---- Server ----
# SERVER_PORT=8087

# ---- Database (MySQL) ----
SPRING_R2DBC_URL=r2dbc:mysql://localhost:3306/streamingdb
DB_USERNAME=root
DB_PASSWORD=root

# ---- Janus ----
# IMPORTANT: this must match the Janus HTTP transport port.
# Common values: 8088 (default), 7088 (your VPS)
JANUS_URL=http://localhost:8088
JANUS_API_TIMEOUT=30

# Admin key for VideoRoom plugin admin operations (rtp_forward, etc.)
# Must match the admin_key in janus.plugin.videoroom.jcfg
# Leave empty if your Janus doesn't require admin_key
JANUS_ADMIN_KEY=supersecret

# ---- Janus VideoRoom (Module 2) ----
# Must match your janus.plugin.videoroom*.jcfg room
JANUS_ROOM_ID=1234
# Room secret (required if your room config has "secret = ...")
JANUS_ROOM_SECRET=adminpwd

# ---- WebRTC ICE (STUN/TURN) ----
# If WEBRTC_ENABLED is false, /api/v1/webrtc/* returns 503.
WEBRTC_ENABLED=true

# Comma-separated list (RTCConfiguration compatible)
WEBRTC_STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# TURN is optional. If you set all 3 values below, the API will return turnAvailable=true
# You can provide multiple TURN urls (comma-separated) for fallback, e.g. UDP + TCP:
# WEBRTC_TURN_SERVER=turn:turn.yourdomain.com:3478?transport=udp,turn:turn.yourdomain.com:3478?transport=tcp
# WEBRTC_TURN_USERNAME=ourshop
# WEBRTC_TURN_CREDENTIAL=change-me

# ---- WebRTC → HLS (FFmpeg) ----
# FFmpeg must be installed on the machine running this service and available on PATH.

# Directory where HLS files will be written (index.m3u8 + segments)
# WEBRTC_HLS_OUTPUT_DIR=./data/webrtc-hls

# Public base URL used to build absolute URLs returned by the API.
# If empty, API returns relative /webrtc-hls/{streamKey}/index.m3u8
# WEBRTC_HLS_PUBLIC_BASE_URL=https://taller.ourshop.work

# Host/IP for Janus rtp_forward destination (where this backend listens UDP).
# Default: 127.0.0.1
# WEBRTC_RTP_FORWARD_HOST=127.0.0.1

# Optional: log each HTTP request (useful for debugging offers)
# HTTP_LOGGING_ENABLED=true
